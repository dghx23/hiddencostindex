<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hidden Cost Index â€” True Cost of Living in South Africa</title>
    <meta name="description" content="The Hidden Cost Index reveals the real cost of living in South Africa.">
    <style>
        :root {
            --bg: #020617;
            --bg-soft: #0f172a;
            --accent: #38bdf8;
            --accent-soft: rgba(56, 189, 248, 0.12);
            --accent-2: #6366f1;
            --danger: #fb7185;
            --good: #4ade80;
            --text-main: #f9fafb;
            --text-muted: #9ca3af;
            --border-subtle: #1e293b;
            --card-radius: 16px;
            --shadow-soft: 0 20px 60px rgba(0, 0, 0, 0.5);
            --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: var(--font-sans);
            background: radial-gradient(circle at top left, #111827 0, #020617 45%, #000 100%);
            color: var(--text-main);
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- Navigation --- */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(2, 6, 23, 0.85);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-subtle);
            padding: 12px 20px;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .brand-logo {
            width: 32px;
            height: 32px;
            border-radius: 10px;
            background: radial-gradient(circle at 20% 20%, #38bdf8, #0ea5e9 35%, #020617 70%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #e5f6ff;
            font-size: 18px;
            font-weight: 700;
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.4);
        }

        .brand-text { font-weight: 700; font-size: 16px; letter-spacing: -0.01em; }

        .nav-links {
            display: flex;
            gap: 8px;
            background: var(--bg-soft);
            padding: 4px;
            border-radius: 999px;
            border: 1px solid var(--border-subtle);
        }

        .nav-btn {
            background: transparent;
            border: none;
            color: var(--text-muted);
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-btn:hover { color: var(--text-main); }
        .nav-btn.active {
            background: var(--accent-2); /* Fallback */
            background: linear-gradient(135deg, #38bdf8, #6366f1);
            color: white;
            box-shadow: 0 4px 12px rgba(56, 189, 248, 0.3);
        }

        /* --- Layout --- */
        main {
            flex: 1;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .view-section {
            display: none; /* Hidden by default */
            animation: fadeIn 0.4s ease;
        }
        .view-section.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Components --- */
        .card {
            background: var(--bg-soft);
            border: 1px solid var(--border-subtle);
            border-radius: var(--card-radius);
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-soft);
        }

        h1 { margin: 0 0 10px; font-size: 28px; background: linear-gradient(to right, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        h2 { margin: 20px 0 10px; font-size: 20px; color: var(--text-main); }
        h3 { margin: 15px 0 8px; font-size: 16px; color: var(--accent); }
        p { line-height: 1.6; color: var(--text-muted); margin-bottom: 15px; font-size: 14px; }

        .btn-primary {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 24px;
            background: linear-gradient(135deg, #38bdf8, #6366f1);
            color: white;
            font-weight: 600;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            text-decoration: none;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(56, 189, 248, 0.3);
            transition: transform 0.1s;
        }
        .btn-primary:active { transform: scale(0.98); }

        /* --- Dashboard Specifics --- */
        .dashboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-subtle);
            padding-bottom: 10px;
        }
        
        .dash-tab {
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 14px;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
        }
        .dash-tab.active {
            background: var(--accent-soft);
            color: var(--accent);
            font-weight: 600;
        }

        .dash-panel { display: none; }
        .dash-panel.active { display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; }

        @media (max-width: 800px) {
            .dash-panel.active { grid-template-columns: 1fr; }
            .nav-container { flex-direction: column; gap: 15px; }
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: rgba(2, 6, 23, 0.5);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 15px;
        }
        .metric-label { font-size: 12px; color: var(--text-muted); margin-bottom: 5px; }
        .metric-value { font-size: 20px; font-weight: 700; color: var(--text-main); }
        .metric-value.bad { color: var(--danger); }
        .metric-value.good { color: var(--good); }
        .metric-value.neutral { color: var(--accent); }

        /* Form Inputs */
        .input-group { margin-bottom: 12px; }
        .input-group label { display: block; font-size: 12px; color: var(--text-muted); margin-bottom: 4px; }
        .input-group input {
            width: 100%;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid var(--border-subtle);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }
        .input-group input:focus { outline: none; border-color: var(--accent); }

        /* Bars for Chart */
        .bar-row { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        .bar-label { width: 100px; font-size: 12px; color: var(--text-muted); text-align: right; }
        .bar-track { flex: 1; height: 8px; background: var(--border-subtle); border-radius: 4px; overflow: hidden; }
        .bar-fill { height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); width: 0%; transition: width 0.5s ease; }
        .bar-val { width: 40px; font-size: 12px; font-weight: bold; }

    </style>
</head>
<body>

    <header>
        <div class="nav-container">
            <div class="brand" onclick="navigateTo('home')">
                <div class="brand-logo">H</div>
                <div class="brand-text">Hidden Cost Index</div>
            </div>
            <nav class="nav-links">
                <button class="nav-btn active" onclick="navigateTo('home')">Home</button>
                <button class="nav-btn" onclick="navigateTo('dashboard')">Dashboard</button>
                <button class="nav-btn" onclick="navigateTo('methodology')">Methodology</button>
                <button class="nav-btn" onclick="navigateTo('about')">About</button>
            </nav>
        </div>
    </header>

    <main>
        <!-- ================= HOME VIEW ================= -->
        <section id="view-home" class="view-section active">
            <div class="card" style="text-align: center; padding: 60px 20px;">
                <div style="font-size: 12px; text-transform: uppercase; letter-spacing: 2px; color: var(--accent); margin-bottom: 10px;">South Africa's Reality Check</div>
                <h1 style="font-size: 40px; margin-bottom: 20px;">The <span style="color: var(--accent)">True Cost</span> of Living.</h1>
                <p style="max-width: 600px; margin: 0 auto 30px;">
                    The Hidden Cost Index reveals how much of your income is silently redirected into security, load shedding, private healthcare, and transport dependency just to survive.
                </p>
                <button class="btn-primary" onclick="navigateTo('dashboard')">Launch Dashboard</button>
            </div>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-label">Example Net Income</div>
                    <div class="metric-value">R 35,000</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Hidden Costs</div>
                    <div class="metric-value bad">R 11,800</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Shadow Tax Rate</div>
                    <div class="metric-value bad">31%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">True Disposable</div>
                    <div class="metric-value good">R 23,200</div>
                </div>
            </div>

            <div class="card">
                <h2>What are Hidden Costs?</h2>
                <p>These are not lifestyle choices. These are costs you pay to replace services that should be provided by the state.</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                    <div><strong style="color: var(--accent)">Security Tax</strong><br><span style="font-size:12px; color:var(--text-muted)">Armed response, fencing, cameras.</span></div>
                    <div><strong style="color: var(--accent)">Infra Failure</strong><br><span style="font-size:12px; color:var(--text-muted)">Inverters, solar, water tanks.</span></div>
                    <div><strong style="color: var(--accent)">Medical Gap</strong><br><span style="font-size:12px; color:var(--text-muted)">Medical aid, gap cover.</span></div>
                    <div><strong style="color: var(--accent)">Transport</strong><br><span style="font-size:12px; color:var(--text-muted)">Private car dependency.</span></div>
                </div>
            </div>
        </section>

        <!-- ================= DASHBOARD VIEW ================= -->
        <section id="view-dashboard" class="view-section">
            <div class="card">
                <div class="dashboard-tabs">
                    <button class="dash-tab active" onclick="switchDashTab('calc')">Calculator</button>
                    <button class="dash-tab" onclick="switchDashTab('compare')">City Comparison</button>
                </div>

                <!-- CALCULATOR TAB -->
                <div id="dash-calc" class="dash-panel active">
                    <div>
                        <h3>Monthly Income & Basics</h3>
                        <div class="input-group">
                            <label>Net Household Income (Take Home)</label>
                            <input type="number" id="in-net" value="35000" oninput="calculate()">
                        </div>
                        <div class="input-group">
                            <label>Basic Living Costs (Rent/Bond + Food + Utilities)</label>
                            <input type="number" id="in-core" value="20000" oninput="calculate()">
                        </div>

                        <h3>Hidden Costs (System Failure)</h3>
                        <div class="metrics-grid" style="grid-template-columns: 1fr 1fr;">
                            <div class="input-group">
                                <label>Security (Armed response, etc)</label>
                                <input type="number" class="calc-input" value="1500" oninput="calculate()">
                            </div>
                            <div class="input-group">
                                <label>Infrastructure (Solar/Inverter loan)</label>
                                <input type="number" class="calc-input" value="1200" oninput="calculate()">
                            </div>
                            <div class="input-group">
                                <label>Health (Medical Aid + Gap)</label>
                                <input type="number" class="calc-input" value="4500" oninput="calculate()">
                            </div>
                            <div class="input-group">
                                <label>Transport (Car payment + ins)</label>
                                <input type="number" class="calc-input" value="3000" oninput="calculate()">
                            </div>
                            <div class="input-group">
                                <label>Education (Private fees)</label>
                                <input type="number" class="calc-input" value="0" oninput="calculate()">
                            </div>
                            <div class="input-group">
                                <label>Crime Risk (Self Insurance)</label>
                                <input type="number" class="calc-input" value="500" oninput="calculate()">
                            </div>
                        </div>
                    </div>

                    <!-- RESULTS SIDEBAR -->
                    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 12px; height: fit-content;">
                        <h3 style="margin-top:0;">Results</h3>
                        
                        <div style="margin-bottom: 20px;">
                            <div class="metric-label">Hidden Cost Total</div>
                            <div class="metric-value bad" id="out-total">R 10,700</div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <div class="metric-label">Shadow Tax Rate</div>
                            <div class="metric-value neutral" id="out-rate">30.5%</div>
                            <div style="font-size: 11px; color: var(--text-muted)">% of net income spent on system failure</div>
                        </div>

                        <div style="margin-bottom: 20px; padding-top: 20px; border-top: 1px dashed var(--border-subtle);">
                            <div class="metric-label">True Disposable Income</div>
                            <div class="metric-value good" id="out-disposable">R 24,300</div>
                            <div style="font-size: 11px; color: var(--text-muted)">What you actually have left</div>
                        </div>

                        <div style="background: rgba(56, 189, 248, 0.1); padding: 10px; border-radius: 8px; border: 1px solid var(--accent-soft);">
                            <div class="metric-label" style="color: var(--accent);">Hidden Cost Index (HCI)</div>
                            <div class="metric-value" style="color: var(--accent);" id="out-hci">53.5</div>
                            <div style="font-size: 11px; color: var(--text-muted)">HCI > 50 means hidden costs are half your living costs.</div>
                        </div>
                    </div>
                </div>

                <!-- COMPARISON TAB -->
                <div id="dash-compare" class="dash-panel">
                    <div>
                        <h3>Global HCI Comparison</h3>
                        <p>How much "Survival Tax" do households pay in different cities?</p>
                        
                        <div class="bar-row">
                            <div class="bar-label">Johannesburg</div>
                            <div class="bar-track"><div class="bar-fill" style="width: 59%;"></div></div>
                            <div class="bar-val">59</div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">Cape Town</div>
                            <div class="bar-track"><div class="bar-fill" style="width: 54%;"></div></div>
                            <div class="bar-val">54</div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">Melbourne</div>
                            <div class="bar-track"><div class="bar-fill" style="width: 15%;"></div></div>
                            <div class="bar-val">15</div>
                        </div>
                        <div class="bar-row">
                            <div class="bar-label">Shenzhen</div>
                            <div class="bar-track"><div class="bar-fill" style="width: 20%;"></div></div>
                            <div class="bar-val">20</div>
                        </div>

                        <p style="font-size: 12px; margin-top: 20px;">*Values are stylised estimates based on middle-class household profiles.</p>
                    </div>
                    
                    <div style="font-size: 13px; color: var(--text-muted);">
                        <h3>Why the difference?</h3>
                        <p><strong>Joburg/Cape Town:</strong> High spending on private security, medical aid, and private transport due to public sector gaps.</p>
                        <p><strong>Melbourne/Shenzhen:</strong> Higher tax, but "hidden costs" are near zero because public safety, healthcare, and transport function reliably.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================= METHODOLOGY VIEW ================= -->
        <section id="view-methodology" class="view-section">
            <div class="card">
                <h1>Methodology</h1>
                <p>The Hidden Cost Index (HCI) groups "system failure costs" into six buckets.</p>
                
                <h3>The Formula</h3>
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; color: var(--good);">
                    HIDDEN_TOTAL = Security + Infra + Health + Transport + Education + CrimeRisk<br><br>
                    TRUE_DISPOSABLE = Net_Income - HIDDEN_TOTAL<br><br>
                    HCI_SCORE = (HIDDEN_TOTAL / BASIC_LIVING_COSTS) * 100
                </div>

                <h3>Definitions</h3>
                <ul style="font-size: 14px; color: var(--text-muted); line-height: 1.8;">
                    <li><strong>Security Tax:</strong> Armed response, electric fencing, guard levies.</li>
                    <li><strong>Infra Failure:</strong> Inverters, batteries, generators, water backup.</li>
                    <li><strong>Health Gap:</strong> Cost of medical aid required because public health is unreliable.</li>
                    <li><strong>Transport Penalty:</strong> Cost of car ownership required because public rail/bus is unsafe or absent.</li>
                </ul>
            </div>
        </section>

        <!-- ================= ABOUT VIEW ================= -->
        <section id="view-about" class="view-section">
            <div class="card">
                <h1>About this Project</h1>
                <p>HiddenCostIndex.co.za exists to make one thing visible: <strong>The cost of structural failure.</strong></p>
                <p>We often talk about "Cost of Living" in terms of bread and milk prices. We rarely quantify the massive portion of our income that goes towards buying the safety and services that taxes were supposed to cover.</p>
                
                <h3>Disclaimer</h3>
                <p>This tool is a descriptive model, not financial advice. It is designed to illustrate the pressure on South African households.</p>
                
                <h3>Contact</h3>
                <p>For feedback or collaboration:</p>
                <a href="mailto:info@hiddencostindex.co.za" class="btn-primary" style="font-size: 12px;">Email Maintainer</a>
            </div>
        </section>

    </main>

    <script>
        // --- Navigation Logic ---
        function navigateTo(viewId) {
            // Update Tab styles
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.innerText.toLowerCase() === viewId) btn.classList.add('active');
            });
            // Handle Home case specifically for nav styling
            if(viewId === 'home') document.querySelectorAll('.nav-btn')[0].classList.add('active');

            // Hide all sections
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            
            // Show target section
            document.getElementById('view-' + viewId).classList.add('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // --- Dashboard Logic ---
        function switchDashTab(tabId) {
            // Update buttons
            document.querySelectorAll('.dash-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Switch panels
            document.querySelectorAll('.dash-panel').forEach(panel => panel.classList.remove('active'));
            document.getElementById('dash-' + tabId).classList.add('active');
        }

        function formatCurrency(num) {
            return 'R ' + Math.round(num).toLocaleString();
        }

        function calculate() {
            // Get Income
            const netIncome = parseFloat(document.getElementById('in-net').value) || 0;
            const coreCost = parseFloat(document.getElementById('in-core').value) || 1; // Prevent div by zero

            // Sum Hidden Costs
            let hiddenTotal = 0;
            document.querySelectorAll('.calc-input').forEach(input => {
                hiddenTotal += parseFloat(input.value) || 0;
            });

            // Calculate derived
            const trueDisposable = netIncome - hiddenTotal;
            const shadowRate = (hiddenTotal / netIncome) * 100;
            const hci = (hiddenTotal / coreCost) * 100;

            // Update UI
            document.getElementById('out-total').innerText = formatCurrency(hiddenTotal);
            document.getElementById('out-disposable').innerText = formatCurrency(trueDisposable);
            document.getElementById('out-rate').innerText = shadowRate.toFixed(1) + '%';
            document.getElementById('out-hci').innerText = hci.toFixed(1);

            // Coloring logic
            const dispEl = document.getElementById('out-disposable');
            if(trueDisposable < 0) { dispEl.style.color = 'var(--danger)'; } 
            else { dispEl.style.color = 'var(--good)'; }
        }

        // Run once on load
        calculate();
    </script>
</body>
</html>

